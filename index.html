<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Los Pibes 6+6 | Oficial</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@700&family=Inter:wght@400;700;900&display=swap" rel="stylesheet">
    <style>
    body { 
        font-family: 'Inter', sans-serif; 
        background-color: #020617; 
        color: white;
        margin: 0;
        padding: 0;
        overflow-x: hidden;
    }
    .hero-bg {
        background: linear-gradient(to bottom, rgba(2, 6, 23, 0.6), rgba(2, 6, 23, 0.95)), 
                    url('https://images.unsplash.com/photo-1574629810360-7efbbe195018?q=80&w=2000&auto=format&fit=crop');
        background-size: cover; 
        background-position: center center; 
        background-attachment: fixed; 
        min-height: 100vh;
        position: relative;
    }
    
    /* Efecto parallax suave */
    @media (min-width: 1024px) {
        .hero-bg::before {
            content: '';
            position: fixed;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: url('https://images.unsplash.com/photo-1574629810360-7efbbe195018?q=80&w=2000&auto=format&fit=crop');
            background-size: cover;
            background-position: center 50%;
            z-index: -1;
            transform: translateZ(-1px) scale(1.5);
        }
    }
    
    .glass { 
        background: rgba(255, 255, 255, 0.05); 
        backdrop-filter: blur(12px); 
        border: 1px solid rgba(255, 255, 255, 0.1); 
        transition: all 0.3s ease; 
    }
    .glass:hover { border-color: #22c55e; transform: translateY(-2px); }
    .vastago-highlight { color: #22c55e; text-shadow: 0 0 10px rgba(34, 197, 94, 0.4); }
    .nacional-highlight { color: #3b82f6; text-shadow: 0 0 10px rgba(59, 130, 246, 0.4); }
    .btn-activo { background: #22c55e; box-shadow: 0 0 20px rgba(34, 197, 94, 0.3); }
    .escudo-equipo { width: 56px; height: 56px; object-fit: contain; }
    
    /* Mobile optimization */
    @media (max-width: 640px) {
        .hero-bg {
            background: linear-gradient(to bottom, rgba(2, 6, 23, 0.7), rgba(2, 6, 23, 0.95)), 
                        url('https://images.unsplash.com/photo-1574629810360-7efbbe195018?q=80&w=2000&auto=format&fit=crop');
            background-size: cover;
            background-position: center 45%;
            background-attachment: scroll;
        }
        .escudo-equipo { width: 40px; height: 40px; }
    }
    
    /* Landscape mobile */
    @media (max-width: 900px) and (orientation: landscape) {
        .hero-bg {
            background-position: center 40%;
        }
    }
    
    /* Tablets portrait */
    @media (min-width: 641px) and (max-width: 1024px) and (orientation: portrait) {
        .hero-bg {
            background-position: center 48%;
        }
    }
</style>
</head>
<body class="hero-bg">
    <div class="max-w-5xl mx-auto px-3 sm:px-4 py-4 sm:py-12">
        <header class="text-center mb-6 sm:mb-12">
            <h1 class="text-3xl sm:text-6xl font-black italic uppercase tracking-tighter leading-none" style="font-family: 'Oswald';">
                LOS PIBES <span class="text-green-500">6+6</span>
            </h1>
            <p class="text-slate-400 tracking-[0.2em] sm:tracking-[0.3em] uppercase text-[8px] sm:text-[10px] mt-2 sm:mt-4 font-bold">TEMPORADA 2026 | Torneo Los Pibes 6+6</p>
        </header>

        <!-- Selector de Torneo -->
        <div class="flex justify-center mb-3 sm:mb-6 bg-white/5 p-1 rounded-2xl w-fit mx-auto border border-white/10">
            <button onclick="cambiarTorneo('Apertura')" id="btn-torneo-Apertura" class="px-6 sm:px-8 py-2 sm:py-3 rounded-xl font-bold text-sm sm:text-base transition-all">Apertura</button>
            <button onclick="cambiarTorneo('Clausura')" id="btn-torneo-Clausura" class="px-6 sm:px-8 py-2 sm:py-3 rounded-xl font-bold text-sm sm:text-base transition-all">Clausura</button>
        </div>

        <!-- Selector de Vista Principal -->
        <div class="flex flex-wrap justify-center gap-1 sm:gap-2 mb-4 sm:mb-10 bg-white/5 p-1 rounded-2xl w-fit mx-auto border border-white/10 max-w-[95vw]">
            <button onclick="cambiarVista('proxima')" id="btn-vista-proxima" class="px-2 sm:px-5 py-2 sm:py-3 rounded-xl font-bold text-[10px] sm:text-base transition-all whitespace-nowrap">Próxima Fecha</button>
            <button onclick="cambiarVista('tabla')" id="btn-vista-tabla" class="px-3 sm:px-5 py-2 sm:py-3 rounded-xl font-bold text-[10px] sm:text-base transition-all">Tabla</button>
            <button onclick="cambiarVista('fixture')" id="btn-vista-fixture" class="px-3 sm:px-5 py-2 sm:py-3 rounded-xl font-bold text-[10px] sm:text-base transition-all">Fixture</button>
            <button onclick="cambiarVista('goleadores')" id="btn-vista-goleadores" class="px-2 sm:px-5 py-2 sm:py-3 rounded-xl font-bold text-[10px] sm:text-base transition-all">Goleadores</button>
        </div>

        <!-- Contenedor de Fixture/Próxima Fecha -->
        <div id="partidos-container" class="space-y-3 sm:space-y-5 text-center">
            <div class="animate-pulse text-slate-500 text-xs sm:text-sm italic font-medium tracking-widest">Sincronizando con planilla...</div>
        </div>

        <!-- Contenedor de Tabla -->
        <div id="tabla-container" class="hidden">
            <div class="glass rounded-xl sm:rounded-2xl overflow-x-auto">
                <table class="w-full text-sm sm:text-base">
                    <thead class="bg-white/5">
                        <tr class="text-[10px] sm:text-sm text-slate-400 uppercase tracking-wider">
                            <th class="py-2 sm:py-4 px-2 sm:px-4 text-left">Pos</th>
                            <th class="py-2 sm:py-4 px-2 sm:px-4 text-left">Equipo</th>
                            <th class="py-2 sm:py-4 px-1 sm:px-3 text-center">PJ</th>
                            <th class="py-2 sm:py-4 px-1 sm:px-3 text-center">PG</th>
                            <th class="py-2 sm:py-4 px-1 sm:px-3 text-center">PE</th>
                            <th class="py-2 sm:py-4 px-1 sm:px-3 text-center">PP</th>
                            <th class="py-2 sm:py-4 px-1 sm:px-3 text-center">GF</th>
                            <th class="py-2 sm:py-4 px-1 sm:px-3 text-center">GC</th>
                            <th class="py-2 sm:py-4 px-1 sm:px-3 text-center">DIF</th>
                            <th class="py-2 sm:py-4 px-1 sm:px-3 text-center font-bold">PTS</th>
                        </tr>
                    </thead>
                    <tbody id="tabla-body">
                        <!-- Se llena dinámicamente -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Contenedor de Goleadores -->
        <div id="goleadores-container" class="hidden">
            <div class="glass rounded-xl sm:rounded-2xl overflow-x-auto">
                <table class="w-full text-sm sm:text-base">
                    <thead class="bg-white/5">
                        <tr class="text-[10px] sm:text-sm text-slate-400 uppercase tracking-wider">
                            <th class="py-2 sm:py-4 px-2 sm:px-4 text-left">Pos</th>
                            <th class="py-2 sm:py-4 px-2 sm:px-4 text-left">Jugador</th>
                            <th class="py-2 sm:py-4 px-2 sm:px-4 text-left">Equipo</th>
                            <th class="py-2 sm:py-4 px-2 sm:px-4 text-center font-bold">⚽ Goles</th>
                        </tr>
                    </thead>
                    <tbody id="goleadores-body">
                        <!-- Se llena dinámicamente -->
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        const API_URL = "https://script.google.com/macros/s/AKfycbw675NO52ucINehQlIo1xJcHfr7Jd-uAIi6dvhitcB0aApt_5bRBu_2UI_avNwWxdf2/exec";
        const ESCUDO_VASTAGO = "https://nqnciudad.github.io/torneo6-6/imagen/escudo-vastago.png";
        const ESCUDO_NACIONAL = "https://nqnciudad.github.io/torneo6-6/imagen/escudo-nacional.png";
        
        let torneoActual = 'Apertura';
        let vistaActual = 'proxima';
        let datosActuales = [];

        function obtenerInfoEquipo(nombreEquipo) {
            if (nombreEquipo.includes("Vástago")) {
                return { escudo: ESCUDO_VASTAGO, clase: "vastago-highlight", borderColor: "border-green-500", bgColor: "bg-green-500/5" };
            } else if (nombreEquipo.includes("Nacional")) {
                return { escudo: ESCUDO_NACIONAL, clase: "nacional-highlight", borderColor: "border-blue-500", bgColor: "bg-blue-500/5" };
            }
            return { escudo: null, clase: "", borderColor: "border-transparent", bgColor: "" };
        }

        function cambiarTorneo(torneo) {
            torneoActual = torneo;
            document.querySelectorAll('[id^="btn-torneo-"]').forEach(b => b.classList.remove('btn-activo'));
            document.getElementById('btn-torneo-' + torneo).classList.add('btn-activo');
            cargarDatos();
        }

        function cambiarVista(vista) {
            vistaActual = vista;
            document.querySelectorAll('[id^="btn-vista-"]').forEach(b => b.classList.remove('btn-activo'));
            document.getElementById('btn-vista-' + vista).classList.add('btn-activo');
            
            document.getElementById('partidos-container').classList.add('hidden');
            document.getElementById('tabla-container').classList.add('hidden');
            document.getElementById('goleadores-container').classList.add('hidden');
            
            if (vista === 'tabla') {
                document.getElementById('tabla-container').classList.remove('hidden');
                generarTabla();
            } else if (vista === 'goleadores') {
                document.getElementById('goleadores-container').classList.remove('hidden');
                cargarGoleadores();
            } else {
                document.getElementById('partidos-container').classList.remove('hidden');
                mostrarPartidos();
            }
        }

        async function cargarDatos() {
            const container = document.getElementById('partidos-container');
            container.innerHTML = '<div class="py-10 text-slate-400 italic text-sm">Actualizando resultados...</div>';
            
            try {
                const response = await fetch(API_URL + "?torneo=" + torneoActual + "&t=" + new Date().getTime());
                const datos = await response.json();
                
                if (datos.error) {
                    container.innerHTML = `<div class="p-4 glass rounded-xl text-red-400 font-medium text-sm">${datos.error}</div>`;
                    return;
                }

                datosActuales = datos;
                
                if (vistaActual === 'tabla') {
                    generarTabla();
                } else if (vistaActual === 'goleadores') {
                    cargarGoleadores();
                } else {
                    mostrarPartidos();
                }
            } catch (error) {
                console.error(error);
                container.innerHTML = `<div class="p-4 glass rounded-xl text-red-400 text-sm">Error de conexión. Revisa la consola (F12).</div>`;
            }
        }

        async function cargarGoleadores() {
            const container = document.getElementById('goleadores-body');
            container.innerHTML = '<tr><td colspan="4" class="py-10 text-center text-slate-400 italic text-sm">Cargando goleadores...</td></tr>';
            
            try {
                const response = await fetch(API_URL + "?accion=goleadores&t=" + new Date().getTime());
                const goleadores = await response.json();
                
                if (goleadores.error) {
                    container.innerHTML = `<tr><td colspan="4" class="p-4 text-red-400 font-medium text-sm text-center">${goleadores.error}</td></tr>`;
                    return;
                }

                const jugadoresMap = {};
                
                goleadores.forEach(goleador => {
                    const jugador = goleador.Jugador;
                    const equipo = goleador.Equipo;
                    const goles = parseInt(goleador.Goles) || 0;
                    
                    if (!jugadoresMap[jugador]) {
                        jugadoresMap[jugador] = { Jugador: jugador, Equipo: equipo, Goles: 0 };
                    }
                    
                    jugadoresMap[jugador].Goles += goles;
                });
                
                const goleadoresAgrupados = Object.values(jugadoresMap).sort((a, b) => b.Goles - a.Goles);
                
                container.innerHTML = "";
                
                goleadoresAgrupados.forEach((goleador, index) => {
                    const info = obtenerInfoEquipo(goleador.Equipo);
                    
                    const equipoHTML = info.escudo
                        ? `<div class="flex items-center gap-2">
                            <img src="${info.escudo}" alt="${goleador.Equipo}" class="escudo-equipo">
                            <span class="${info.clase}">${goleador.Equipo}</span>
                           </div>`
                        : goleador.Equipo;
                    
                    container.innerHTML += `
                        <tr class="border-t border-white/5 hover:bg-white/5 transition-colors ${info.bgColor}">
                            <td class="py-2 sm:py-4 px-2 sm:px-4 font-bold text-slate-400 text-xs sm:text-base">${index + 1}</td>
                            <td class="py-2 sm:py-4 px-2 sm:px-4 font-bold text-xs sm:text-lg ${info.clase}">${goleador.Jugador}</td>
                            <td class="py-2 sm:py-4 px-2 sm:px-4 text-xs sm:text-base">${equipoHTML}</td>
                            <td class="py-2 sm:py-4 px-2 sm:px-4 text-center font-black text-lg sm:text-2xl text-green-400">${goleador.Goles}</td>
                        </tr>
                    `;
                });
                
            } catch (error) {
                console.error(error);
                container.innerHTML = '<tr><td colspan="4" class="p-4 text-red-400 text-sm text-center">Error al cargar goleadores</td></tr>';
            }
        }

        function mostrarPartidos() {
            const container = document.getElementById('partidos-container');
            container.innerHTML = "";
            
            let partidosMostrar = datosActuales;
            
            if (vistaActual === 'proxima') {
                const partidosPendientes = datosActuales.filter(p => p.GolesL === "" || p.GolesV === "");
                
                if (partidosPendientes.length === 0) {
                    container.innerHTML = '<div class="glass rounded-2xl p-6 text-center text-slate-400 italic text-base sm:text-lg">¡Torneo finalizado! No hay más fechas pendientes.</div>';
                    return;
                }
                
                const proximaFecha = new Date(partidosPendientes[0].Fecha);
                partidosMostrar = partidosPendientes.filter(p => {
                    const fechaPartido = new Date(p.Fecha);
                    return fechaPartido.getTime() === proximaFecha.getTime();
                });
            }
            
            partidosMostrar.forEach(partido => {
                const infoLocal = obtenerInfoEquipo(partido.Local);
                const infoVisita = obtenerInfoEquipo(partido.Visitante);
                
                const fecha = new Date(partido.Fecha);
                const fechaFormateada = fecha.toLocaleDateString('es-AR', { day: '2-digit', month: '2-digit', year: 'numeric' });

                const equipoLocalHTML = infoLocal.escudo
                    ? `<div class="flex items-center gap-2 sm:gap-3 justify-start">
                        <img src="${infoLocal.escudo}" alt="${partido.Local}" class="escudo-equipo">
                        <div class="text-sm sm:text-2xl font-black uppercase tracking-tight ${infoLocal.clase}">${partido.Local}</div>
                       </div>`
                    : `<div class="text-sm sm:text-2xl font-black uppercase tracking-tight">${partido.Local}</div>`;

                const equipoVisitaHTML = infoVisita.escudo
                    ? `<div class="flex items-center gap-2 sm:gap-3 justify-end">
                        <div class="text-sm sm:text-2xl font-black uppercase tracking-tight ${infoVisita.clase}">${partido.Visitante}</div>
                        <img src="${infoVisita.escudo}" alt="${partido.Visitante}" class="escudo-equipo">
                       </div>`
                    : `<div class="text-sm sm:text-2xl font-black uppercase tracking-tight">${partido.Visitante}</div>`;

                const borderColor = infoLocal.escudo || infoVisita.escudo 
                    ? (infoLocal.escudo ? infoLocal.borderColor : infoVisita.borderColor)
                    : 'border-transparent';

                container.innerHTML += `
                    <div class="glass rounded-xl sm:rounded-2xl p-3 sm:p-6 shadow-xl border-l-4 ${borderColor}">
                        <div class="flex items-center justify-between gap-2 sm:gap-3">
                            <div class="w-[35%]">
                                ${equipoLocalHTML}
                            </div>

                            <div class="w-[30%]">
                                <div class="text-[10px] sm:text-base text-slate-400 font-bold uppercase mb-1 sm:mb-3">${fechaFormateada}</div>
                                <div class="flex items-center justify-center gap-1 sm:gap-3">
                                    <span class="text-2xl sm:text-5xl font-black">${partido.GolesL !== "" ? partido.GolesL : '-'}</span>
                                    <span class="text-[10px] sm:text-base bg-white/10 px-1.5 sm:px-3 py-0.5 sm:py-1.5 rounded text-slate-300 font-bold">VS</span>
                                    <span class="text-2xl sm:text-5xl font-black">${partido.GolesV !== "" ? partido.GolesV : '-'}</span>
                                </div>
                            </div>

                            <div class="w-[35%]">
                                ${equipoVisitaHTML}
                            </div>
                        </div>
                    </div>
                `;
            });
        }

        function generarTabla() {
            const equipos = {};
            
            datosActuales.forEach(partido => {
                const local = partido.Local;
                const visitante = partido.Visitante;
                
                if (!equipos[local]) {
                    equipos[local] = { equipo: local, pj: 0, pg: 0, pe: 0, pp: 0, gf: 0, gc: 0, pts: 0 };
                }
                if (!equipos[visitante]) {
                    equipos[visitante] = { equipo: visitante, pj: 0, pg: 0, pe: 0, pp: 0, gf: 0, gc: 0, pts: 0 };
                }
            });
            
            datosActuales.forEach(partido => {
                if (partido.GolesL === "" || partido.GolesV === "") return;
                
                const local = partido.Local;
                const visitante = partido.Visitante;
                const golesL = parseInt(partido.GolesL);
                const golesV = parseInt(partido.GolesV);
                
                equipos[local].pj++;
                equipos[visitante].pj++;
                equipos[local].gf += golesL;
                equipos[local].gc += golesV;
                equipos[visitante].gf += golesV;
                equipos[visitante].gc += golesL;
                
                if (golesL > golesV) {
                    equipos[local].pg++;
                    equipos[local].pts += 3;
                    equipos[visitante].pp++;
                } else if (golesL < golesV) {
                    equipos[visitante].pg++;
                    equipos[visitante].pts += 3;
                    equipos[local].pp++;
                } else {
                    equipos[local].pe++;
                    equipos[visitante].pe++;
                    equipos[local].pts++;
                    equipos[visitante].pts++;
                }
            });
            
            const tablaOrdenada = Object.values(equipos).sort((a, b) => {
                const difA = a.gf - a.gc;
                const difB = b.gf - b.gc;
                
                if (b.pts !== a.pts) return b.pts - a.pts;
                if (difB !== difA) return difB - difA;
                return b.gf - a.gf;
            });
            
            const tbody = document.getElementById('tabla-body');
            tbody.innerHTML = "";
            
            tablaOrdenada.forEach((equipo, index) => {
                const info = obtenerInfoEquipo(equipo.equipo);
                const dif = equipo.gf - equipo.gc;
                const difColor = dif > 0 ? 'text-green-400' : dif < 0 ? 'text-red-400' : 'text-slate-400';
                
                const equipoHTML = info.escudo
                    ? `<div class="flex items-center gap-2">
                        <img src="${info.escudo}" alt="${equipo.equipo}" class="escudo-equipo">
                        <span class="${info.clase}">${equipo.equipo}</span>
                       </div>`
                    : equipo.equipo;
                
                tbody.innerHTML += `
                    <tr class="border-t border-white/5 hover:bg-white/5 transition-colors ${info.bgColor}">
                        <td class="py-2 sm:py-4 px-2 sm:px-4 font-bold text-slate-400 text-xs sm:text-base">${index + 1}</td>
                        <td class="py-2 sm:py-4 px-2 sm:px-4 font-bold text-xs sm:text-lg">${equipoHTML}</td>
                        <td class="py-2 sm:py-4 px-1 sm:px-3 text-center text-slate-400 text-xs sm:text-base">${equipo.pj}</td>
                        <td class="py-2 sm:py-4 px-1 sm:px-3 text-center text-green-400 text-xs sm:text-base">${equipo.pg}</td>
                        <td class="py-2 sm:py-4 px-1 sm:px-3 text-center text-slate-400 text-xs sm:text-base">${equipo.pe}</td>
                        <td class="py-2 sm:py-4 px-1 sm:px-3 text-center text-red-400 text-xs sm:text-base">${equipo.pp}</td>
                        <td class="py-2 sm:py-4 px-1 sm:px-3 text-center text-xs sm:text-base">${equipo.gf}</td>
                        <td class="py-2 sm:py-4 px-1 sm:px-3 text-center text-xs sm:text-base">${equipo.gc}</td>
                        <td class="py-2 sm:py-4 px-1 sm:px-3 text-center font-bold text-xs sm:text-base ${difColor}">${dif > 0 ? '+' : ''}${dif}</td>
                        <td class="py-2 sm:py-4 px-1 sm:px-3 text-center font-black text-lg sm:text-2xl">${equipo.pts}</td>
                    </tr>
                `;
            });
        }

        cambiarTorneo('Apertura');
        cambiarVista('proxima');
    </script>

    <script>
    // Efecto parallax en scroll
    window.addEventListener('scroll', function() {
        const scrolled = window.pageYOffset;
        const parallax = document.querySelector('.hero-bg');
        
        if (parallax) {
            // Ajusta el 0.5 para más o menos efecto (0.3 = sutil, 0.8 = fuerte)
            parallax.style.backgroundPositionY = (scrolled * 0.5) + 'px';
        }
    });
</script>
</body>
</html>

